<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RedPay Dashboard</title>
<link rel="stylesheet" href="styles.css">

<style>
/* Basic dashboard styling to match your dark-red theme */
body {
    margin: 0;
    padding: 0;
    background: #0a0000;
    font-family: Arial, sans-serif;
    color: #fff;
}

.top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 18px;
    font-size: 22px;
    font-weight: bold;
}

.avatar {
    background: #440000;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    cursor: pointer;
}

.balance-card {
    background: #cc0000;
    margin: 15px;
    padding: 20px;
    border-radius: 18px;
    color: white;
}

.balance-card h2 {
    margin: 0;
    font-size: 28px;
}

.balance-row {
    display: flex;
    justify-content: space-between;
    margin-top: 8px;
}


.btn-row {
    display: flex;
    justify-content: space-between;
    margin-top: 18px;
}

.big-btn {
    width: 48%;
    background: rgba(255,255,255,0.18);
    padding: 15px;
    text-align: center;
    border-radius: 12px;
    cursor: pointer;
    font-size: 18px;
    font-weight: bold;
}

.menu-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    padding: 15px;
    margin-top: 20px;
}

.menu-item {
    background: #1a0000;
    padding: 20px;
    text-align: center;
    border-radius: 12px;
    cursor: pointer;
    font-size: 14px;
}
.carousel {
    margin: 20px;
    padding: 20px;
    background: #330000;
    border-radius: 12px;
}

</style>
</head>


<body>

<div class="top-bar">
    RedPay
    <div id="avatarInitials" class="avatar">AU</div>
</div>

<div class="balance-card">
    <div>Total Balance</div>
    <h2 id="balanceAmount">‚Ç¶160,000</h2>
    <div id="balanceId" style="opacity:0.7; margin-top:5px;">ID: 5580045221</div>

    <div class="btn-row">
        <div id="claimBtn" class="big-btn">üéÅ Claim ‚Ç¶30,000</div>
        <div id="withdrawBtn" class="big-btn">‚úà Withdraw</div>
    </div>
</div>

<div class="menu-grid">
    <div class="menu-item" id="buyRpc">BuyRPC</div>
    <div class="menu-item" id="broadcast">Broadcast</div>
    <div class="menu-item" id="refer">Refer&Earn</div>
    <div class="menu-item" id="community">Community</div>
    <div class="menu-item" id="history">History</div>
    <div class="menu-item" id="support">Support</div>
</div>


<!-- CAROUSEL -->
<div class="carousel">
    <h3 style="text-align:center;">Transact & Win</h3>
    <div id="carouselTrack">Loading offers‚Ä¶</div>

    <div style="display:flex; justify-content:space-between; margin-top:10px;">
        <button id="arrowLeft">‚óÄ</button>
        <button id="arrowRight">‚ñ∂</button>
    </div>

    <div style="text-align:center; margin-top:10px;">
        <span class="dot" data-slide="0">‚óè</span>
        <span class="dot" data-slide="1">‚óè</span>
        <span class="dot" data-slide="2">‚óè</span>
    </div>
</div>



<!-- FIXED + CLEAN SCRIPT -->
<script type="module">

    import { computeInitials, generateId, startClaimCountdown, initCarousel } from './dashboard.js';

    /* Load stored user data */
    const storedName = localStorage.getItem('registeredName') || '';
    const storedBalance = "‚Ç¶" + Number(localStorage.getItem('rp_balance') || 160000).toLocaleString();
    const storedId = localStorage.getItem('rp_userId') || generateId();

    /* Apply to DOM */
    document.getElementById('avatarInitials').textContent = computeInitials(storedName);
    document.getElementById('balanceAmount').textContent = storedBalance;
    document.getElementById('balanceId').textContent = `ID: ${storedId}`;

    /* Claim BTN */
    document.getElementById('claimBtn').addEventListener('click', () => {
        startClaimCountdown(document.getElementById('claimBtn'));
    });

    /* Withdraw */
    document.getElementById('withdrawBtn').addEventListener('click', () => {
        window.location.href = 'withdraw.html';
    });

    /* Menu button redirects */
    const menu = {
        buyRpc: "buyrpc.html",
        broadcast: "broadcast.html",
        refer: "refer.html",
        community: "community.html",
        history: "history.html",
        support: "support.html",
    };

    Object.keys(menu).forEach(id => {
        document.getElementById(id).addEventListener('click', () => {
            window.location.href = menu[id];
        });
    });

    /* Profile click */
    document.getElementById('avatarInitials').addEventListener('click', () => {
        window.location.href = 'profile.html';
    });

    /* Carousel */
    initCarousel();

</script>


</body>
</html>
