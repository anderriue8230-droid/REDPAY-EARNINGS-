// SIGNUP & SIGNIN FUNCTION

const form = document.getElementById("authForm");
const signupTab = document.getElementById("tabSignup");
const signinTab = document.getElementById("tabSignin");
const nameRow = document.getElementById("nameRow");
const submitBtn = document.querySelector(".submit");

// Switch tabs
signupTab.addEventListener("click", () => {
  signupTab.classList.add("active");
  signinTab.classList.remove("active");
  nameRow.style.display = "flex";
  submitBtn.textContent = "Create account";
});

signinTab.addEventListener("click", () => {
  signinTab.classList.add("active");
  signupTab.classList.remove("active");
  nameRow.style.display = "none";
  submitBtn.textContent = "Sign in";
});

// Form submit
form.addEventListener("submit", function(event) {
  event.preventDefault();

  const first = document.getElementById("firstName").value.trim();
  const last = document.getElementById("lastName").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const email = document.getElementById("email").value.trim();
  const pwd = document.getElementById("password").value.trim();
  const country = document.getElementById("countryLabel").innerText.trim();

  // SIGN UP MODE
  if (signupTab.classList.contains("active")) {

    if (!first || !last || !phone || !email || !pwd) {
      alert("Please fill all fields");
      return;
    }

    // Save user
    localStorage.setItem("registeredName", first + " " + last);
    localStorage.setItem("rp_phone", phone);
    localStorage.setItem("rp_email", email);
    localStorage.setItem("rp_pwd", pwd);
    localStorage.setItem("rp_country", country);

    // Set default balance
    localStorage.setItem("rp_balance", "0");

    alert("Registration Successful!");
    window.location.href = "dashboard.html";
    return;
  }

  // SIGN IN MODE
  if (signinTab.classList.contains("active")) {

    const savedPhone = localStorage.getItem("rp_phone");
    const savedPwd = localStorage.getItem("rp_pwd");

    if (phone === savedPhone && pwd === savedPwd) {
      alert("Login Successful!");
      window.location.href = "dashboard.html";
    } else {
      alert("Incorrect login details");
    }
  }
});
